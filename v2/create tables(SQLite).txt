DROP TABLE IF EXISTS archi_plugin;
DROP TABLE IF EXISTS bendpoints;
DROP TABLE IF EXISTS database_version;
DROP TABLE IF EXISTS elements;
DROP TABLE IF EXISTS elements_in_model;
DROP TABLE IF EXISTS folders;
DROP TABLE IF EXISTS folders_in_model;
DROP TABLE IF EXISTS images;
DROP TABLE IF EXISTS models;
DROP TABLE IF EXISTS properties;
DROP TABLE IF EXISTS relationships;
DROP TABLE IF EXISTS relationships_in_model;
DROP TABLE IF EXISTS views;
DROP TABLE IF EXISTS views_connections;
DROP TABLE IF EXISTS views_in_model;
DROP TABLE IF EXISTS views_objects;

CREATE TABLE bendpoints (
  parent_id      varchar(50) NOT NULL, 
  parent_version integer(10) NOT NULL, 
  rank           integer(10) NOT NULL, 
  start_x        integer(10) NOT NULL, 
  start_y        integer(10) NOT NULL, 
  end_x          integer(10) NOT NULL, 
  end_y          integer(10) NOT NULL, 
  PRIMARY KEY (parent_id, 
  parent_version, 
  rank));
CREATE TABLE database_version (
  archi_plugin varchar(50) NOT NULL, 
  version      integer(10) NOT NULL);
CREATE TABLE elements (
  id            varchar(50) NOT NULL, 
  version       integer(10) NOT NULL, 
  class         varchar(50) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation clob NOT NULL, 
  type          varchar(3), 
  created_by    varchar(30) NOT NULL, 
  created_on    timestamp NOT NULL, 
  checkedin_by  varchar(30), 
  checkedin_on  timestamp, 
  deleted_by    varchar(30), 
  deleted_on    timestamp, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE elements_in_model (
  cin_id           INTEGER NOT NULL PRIMARY KEY, 
  element_id       varchar(50) NOT NULL, 
  element_version  integer(10) NOT NULL, 
  parent_folder_id varchar(50) NOT NULL, 
  model_id         varchar(50) NOT NULL, 
  model_version    integer(10) NOT NULL, 
  rank             integer(10) NOT NULL);
CREATE TABLE folders (
  id            varchar(50) NOT NULL, 
  version       integer(10) NOT NULL, 
  type          integer(10) NOT NULL, 
  root_type     integer(10) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation clob NOT NULL, 
  created_by    varchar(30), 
  created_on    timestamp, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE folders_in_model (
  fin_id           INTEGER NOT NULL PRIMARY KEY, 
  folder_id        varchar(50) NOT NULL, 
  folder_version   integer(10) NOT NULL, 
  parent_folder_id varchar(50), 
  model_id         varchar(50) NOT NULL, 
  model_version    integer(10) NOT NULL, 
  rank             integer(10) NOT NULL);
CREATE TABLE images (
  path     varchar(50) NOT NULL, 
  image    blob NOT NULL, 
  checksum varchar(50) NOT NULL, 
  PRIMARY KEY (path));
CREATE TABLE models (
  id           varchar(50) NOT NULL, 
  version      integer(10) NOT NULL, 
  name         varchar(1024) NOT NULL, 
  note         clob, 
  purpose      clob, 
  created_by   varchar(30) NOT NULL, 
  created_on   timestamp NOT NULL, 
  checkedin_by varchar(30), 
  checkedin_on timestamp, 
  deleted_by   varchar(30), 
  deleted_on   timestamp, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE properties (
  parent_id      varchar(50) NOT NULL, 
  parent_version integer(10) NOT NULL, 
  rank           integer(10) NOT NULL, 
  name           varchar(1024) NOT NULL, 
  value          clob NOT NULL, 
  PRIMARY KEY (parent_id, 
  parent_version, 
  rank));
CREATE TABLE relationships (
  id            varchar(50) NOT NULL, 
  version       integer(10) NOT NULL, 
  class         varchar(50) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation clob NOT NULL, 
  source_id     varchar(50), 
  target_id     varchar(50), 
  strength      varchar(20), 
  access_type   integer(10), 
  created_by    varchar(30) NOT NULL, 
  created_on    timestamp NOT NULL, 
  checkedin_by  varchar(30), 
  checkedin_on  timestamp, 
  deleted_by    varchar(30), 
  deleted_on    timestamp, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE relationships_in_model (
  cin_id               INTEGER NOT NULL PRIMARY KEY, 
  relationship_id      varchar(50) NOT NULL, 
  relationship_version integer(10) NOT NULL, 
  parent_folder_id     varchar(50) NOT NULL, 
  model_id             varchar(50) NOT NULL, 
  model_version        integer(10) NOT NULL, 
  rank                 integer(10) NOT NULL);
CREATE TABLE views (
  id                     varchar(50) NOT NULL, 
  version                integer(10) NOT NULL, 
  class                  varchar(50) NOT NULL, 
  name                   varchar(1024) NOT NULL, 
  documentation          clob NOT NULL, 
  hint_content           clob, 
  hint_title             varchar(1024), 
  created_by             varchar(30) NOT NULL, 
  created_on             timestamp NOT NULL, 
  background             integer(10), 
  connection_router_type integer(10) NOT NULL, 
  viewpoint              varchar(30), 
  checksum               varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE views_connections (
  id               varchar(50) NOT NULL, 
  version          integer(10) NOT NULL, 
  container_id     varchar(50) NOT NULL, 
  view_id          varchar(50) NOT NULL, 
  view_version     integer(10) NOT NULL, 
  class            varchar(50) NOT NULL, 
  name             varchar(1024), 
  documentation    clob, 
  is_locked        tinyint(1), 
  line_color       varchar(7), 
  line_width       integer(10), 
  font             varchar(150), 
  font_color       varchar(7), 
  relationship_id  varchar(50), 
  source_object_id varchar(50), 
  target_object_id varchar(50), 
  type             integer(10), 
  rank             integer(10) NOT NULL, 
  checksum         varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version, 
  container_id));
CREATE TABLE views_in_model (
  vin_id           INTEGER NOT NULL PRIMARY KEY, 
  view_id          varchar(50) NOT NULL, 
  view_version     integer(10) NOT NULL, 
  parent_folder_id varchar(50) NOT NULL, 
  model_id         varchar(50) NOT NULL, 
  model_version    integer(10) NOT NULL, 
  rank             integer(10));
CREATE TABLE views_objects (
  id             varchar(50) NOT NULL, 
  version        integer(10) NOT NULL, 
  container_id   varchar(50) NOT NULL, 
  view_id        varchar(50) NOT NULL, 
  view_version   integer(10) NOT NULL, 
  class          varchar(50) NOT NULL, 
  element_id     varchar(50), 
  diagram_ref_id varchar(50), 
  border_color   varchar(7), 
  border_type    integer(10), 
  content        clob, 
  documentation  clob, 
  hint_content   clob, 
  hint_title     varchar(1024), 
  is_locked      tinyint(1), 
  image_path     varchar(50), 
  image_position integer(10), 
  line_color     varchar(7), 
  line_width     integer(10), 
  fill_color     varchar(7), 
  font           varchar(150), 
  font_color     varchar(7), 
  name           varchar(1024), 
  notes          clob, 
  text_alignment integer(10), 
  text_position  integer(10), 
  type           integer(10), 
  x              integer(10), 
  y              integer(10), 
  width          integer(10), 
  height         integer(10), 
  rank           integer(10) NOT NULL, 
  checksum       varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version, 
  container_id));

INSERT INTO database_version (archi_plugin, version) VALUES('DatabasePlugin', 200);