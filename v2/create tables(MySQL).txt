DROP TABLE IF EXISTS archi_plugin;
DROP TABLE IF EXISTS bendpoints;
DROP TABLE IF EXISTS database_version;
DROP TABLE IF EXISTS elements;
DROP TABLE IF EXISTS elements_in_model;
DROP TABLE IF EXISTS folders;
DROP TABLE IF EXISTS folders_in_model;
DROP TABLE IF EXISTS images;
DROP TABLE IF EXISTS models;
DROP TABLE IF EXISTS properties;
DROP TABLE IF EXISTS relationships;
DROP TABLE IF EXISTS relationships_in_model;
DROP TABLE IF EXISTS views;
DROP TABLE IF EXISTS views_connections;
DROP TABLE IF EXISTS views_in_model;
DROP TABLE IF EXISTS views_objects;



CREATE TABLE bendpoints (
  parent_id      varchar(50) NOT NULL, 
  parent_version int(10) NOT NULL, 
  rank           int(10) NOT NULL, 
  start_x        int(10) NOT NULL, 
  start_y        int(10) NOT NULL, 
  end_x          int(10) NOT NULL, 
  end_y          int(10) NOT NULL, 
  PRIMARY KEY (parent_id, 
  parent_version, 
  rank));
CREATE TABLE database_version (
  archi_plugin varchar(50) NOT NULL, 
  version      int(10) NOT NULL);
CREATE TABLE elements (
  id            varchar(50) NOT NULL, 
  version       int(10) NOT NULL, 
  class         varchar(50) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation mediumtext NOT NULL, 
  type          varchar(3), 
  created_by    varchar(30) NOT NULL, 
  created_on    timestamp NOT NULL, 
  checkedin_by  varchar(30), 
  checkedin_on  timestamp NULL, 
  deleted_by    varchar(30), 
  deleted_on    timestamp NULL, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE elements_in_model (
  cin_id           int(10) NOT NULL AUTO_INCREMENT, 
  element_id       varchar(50) NOT NULL, 
  element_version  int(10) NOT NULL, 
  parent_folder_id varchar(50) NOT NULL, 
  model_id         varchar(50) NOT NULL, 
  model_version    int(10) NOT NULL, 
  rank             int(10) NOT NULL, 
  PRIMARY KEY (cin_id));
CREATE TABLE folders (
  id            varchar(50) NOT NULL, 
  version       int(10) NOT NULL, 
  type          int(10) NOT NULL, 
  root_type     int(10) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation mediumtext NOT NULL, 
  created_by    varchar(30), 
  created_on    timestamp NULL, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE folders_in_model (
  fin_id           int(10) NOT NULL AUTO_INCREMENT, 
  folder_id        varchar(50) NOT NULL, 
  folder_version   int(10) NOT NULL, 
  parent_folder_id varchar(50), 
  model_id         varchar(50) NOT NULL, 
  model_version    int(10) NOT NULL, 
  rank             int(10) NOT NULL, 
  PRIMARY KEY (fin_id));
CREATE TABLE images (
  path     varchar(50) NOT NULL, 
  image    longblob NOT NULL, 
  checksum varchar(50) NOT NULL, 
  PRIMARY KEY (path));
CREATE TABLE models (
  id           varchar(50) NOT NULL, 
  version      int(10) NOT NULL, 
  name         varchar(1024) NOT NULL, 
  note         mediumtext, 
  purpose      mediumtext, 
  created_by   varchar(30) NOT NULL, 
  created_on   datetime NOT NULL, 
  checkedin_by varchar(30), 
  checkedin_on timestamp NULL, 
  deleted_by   varchar(30), 
  deleted_on   timestamp NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE properties (
  parent_id      varchar(50) NOT NULL, 
  parent_version int(10) NOT NULL, 
  rank           int(10) NOT NULL, 
  name           varchar(1024) NOT NULL, 
  value          mediumtext NOT NULL, 
  PRIMARY KEY (parent_id, 
  parent_version, 
  rank));
CREATE TABLE relationships (
  id            varchar(50) NOT NULL, 
  version       int(10) NOT NULL, 
  class         varchar(50) NOT NULL, 
  name          varchar(1024) NOT NULL, 
  documentation mediumtext NOT NULL, 
  source_id     varchar(50), 
  target_id     varchar(50), 
  strength      varchar(20), 
  access_type   int(10), 
  created_by    varchar(30) NOT NULL, 
  created_on    timestamp NOT NULL, 
  checkedin_by  varchar(30), 
  checkedin_on  timestamp NULL, 
  deleted_by    varchar(30), 
  deleted_on    timestamp NULL, 
  checksum      varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE relationships_in_model (
  cin_id               int(10) NOT NULL AUTO_INCREMENT, 
  relationship_id      varchar(50) NOT NULL, 
  relationship_version int(10) NOT NULL, 
  parent_folder_id     varchar(50) NOT NULL, 
  model_id             varchar(50) NOT NULL, 
  model_version        int(10) NOT NULL, 
  rank                 int(10) NOT NULL, 
  PRIMARY KEY (cin_id));
CREATE TABLE views (
  id                     varchar(50) NOT NULL, 
  version                int(10) NOT NULL, 
  class                  varchar(50) NOT NULL, 
  name                   varchar(1024) NOT NULL, 
  documentation          mediumtext NOT NULL, 
  hint_content           mediumtext, 
  hint_title             varchar(1024), 
  created_by             varchar(30) NOT NULL, 
  created_on             timestamp NOT NULL, 
  background             int(10), 
  connection_router_type int(10) NOT NULL, 
  viewpoint              varchar(30), 
  screenshot             longblob, 
  checksum               varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version));
CREATE TABLE views_connections (
  id               varchar(50) NOT NULL, 
  version          int(10) NOT NULL, 
  container_id     varchar(50) NOT NULL, 
  view_id          varchar(50) NOT NULL, 
  view_version     int(10) NOT NULL, 
  class            varchar(50) NOT NULL, 
  name             varchar(1024), 
  documentation    mediumtext, 
  is_locked        tinyint, 
  line_color       varchar(7), 
  line_width       int(10), 
  font             varchar(150), 
  font_color       varchar(7), 
  relationship_id  varchar(50), 
  source_object_id varchar(50), 
  target_object_id varchar(50), 
  type             int(10), 
  rank             int(10) NOT NULL, 
  checksum         varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version, 
  container_id));
CREATE TABLE views_in_model (
  vin_id           int(10) NOT NULL AUTO_INCREMENT, 
  view_id          varchar(50) NOT NULL, 
  view_version     int(10) NOT NULL, 
  parent_folder_id varchar(50) NOT NULL, 
  model_id         varchar(50) NOT NULL, 
  model_version    int(10) NOT NULL, 
  rank             int(10), 
  PRIMARY KEY (vin_id));
CREATE TABLE views_objects (
  id             varchar(50) NOT NULL, 
  version        int(10) NOT NULL, 
  container_id   varchar(50) NOT NULL, 
  view_id        varchar(50) NOT NULL, 
  view_version   int(10) NOT NULL, 
  class          varchar(50) NOT NULL, 
  element_id     varchar(50), 
  diagram_ref_id varchar(50), 
  border_color   varchar(7), 
  border_type    int(10), 
  content        mediumtext, 
  documentation  mediumtext, 
  hint_content   mediumtext, 
  hint_title     varchar(1024), 
  is_locked      tinyint, 
  image_path     varchar(50), 
  image_position int(10), 
  line_color     varchar(7), 
  line_width     int(10), 
  fill_color     varchar(7), 
  font           varchar(150), 
  font_color     varchar(7), 
  name           varchar(1024), 
  notes          mediumtext, 
  text_alignment int(10), 
  text_position  int(10), 
  type           int(10), 
  x              int(10), 
  y              int(10), 
  width          int(10), 
  height         int(10), 
  rank           int(10) NOT NULL, 
  checksum       varchar(50) NOT NULL, 
  PRIMARY KEY (id, 
  version, 
  container_id));

INSERT INTO database_version (archi_plugin, version) VALUES('DatabasePlugin', 201);